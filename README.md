# Hilbert Basis Theorem constructivelly in Coq/Rocq

The repository contains a constructive proof of Hilbert's Basis Theorem (a.k.a. HBT below) partly following the outline given in _Coquand & Persson 98_ (see refs below).

## Rings and ideals (constructivelly)

We assume some basic knowledge about rings `R`, ring ideals `I` and polynomial rings `R[X]`:
- rings are tuples `(R,+ᵣ,*ᵣ,0ᵣ,1ᵣ)` where addition `+ᵣ` forms a commutative group with `0ᵣ` as a neutral, and multiplication `*ᵣ` forms a commutative monoid with `1ᵣ` as neutral. There is also a distributivity law of `*ᵣ` over `+ᵣ`. Notice that rings need not have commutative multication `*ᵣ` (typically, matrices form non-commutative rings), but for our purpose here, we assume commutativity.
- ideals `I` are non-empty additive sub-groups of rings furthermore stable under scalar products, i.e. `∀ x ∈ R, ∀ y ∈ I, x *ᵣ y ∈ I`
- the polynomial ring `R[X]` is usually presented via its canonical representation (see below) but also has a categorical characterization as the initial ring in the category of pointed extensions of `R`, i.e. the ring freely generated by adding an unknown `X` to `R`. 

Notice that polynomials over a ring `R` are a bit tricky to implement if one does not assume that `R` has decidable equality. Indeed, in that case, even the notion of degree of a polynomial cannot be defined (as a total function): what is the degree of `a.X¹` if one cannot discriminate whether `a` is `0ᵣ` or not?

Hence the usual canonical representation of `R[X]` as finite formal sequences `a₀.X⁰+...+aₙ.Xⁿ` (where the head coefficent `aₙ` is not `0ᵣ`) is not workable because one cannot normalise addition (or multiplication for non-integral rings) to ensure that the head coefficient not `0ᵣ`.

Instead we build the theory of polynomial rings using setoids, i.e. equality on `R` is relaxed to be a congruence and the polynomial
`0.X⁰+0.X¹+1.X²` has alternate equivalent representations such as eg `0.X⁰+0.X¹+1.X²+0.X³` that we identify under a well chosen congruence.

Of course, to ensure that we indeed build `R[X]` and not an arbitrary extension of `R`, we show that our construction satisfies the categorical initiality condition.

## Hilbert Basis Theorem in classical settings

Classically, ring ideals can (possibly) be:
- _principal_: i.e. `I = { x.g | x ∈ R }` is generated by a single generator `g`;
- _finitely generated_: i.e. `I = { x₁.g₁+...+xₙ.gₙ | x₁,...,xₙ ∈ R }` is generated by finitely many generators `g₁,...,gₙ`.

and in a _principal ring_, all the ideals are principal. Typically, because of Euclidean division, `F[X]` is principal where `F` is a _field_ (a ring where `*ᵣ` forms a group over non-zero value). However principality is not preserved by the construction of polynomial rings. Typically, neither `Z[X]` nor `(Z/4Z)[X]` are principal rings.

A _Noetherian ring_ is a ring where all ideals are finitely generated. Hence principal rings are Noetherian but Noetherianess is preserves by the construction of polynomials rings. And as a consequence, for any field `F`, `F[X]` is Noetherian but more 
generally, also `F[X₁,...,Xₙ]` is Noetherian which is the statement of the HBT.

## Hilbert Basis Theorem in construcive settings

The definition of Noetherian ring (or principal ring btw) in anti-classical settings, where the law of excluded middle is refuted,
are mostly useless. Indeed, given a proposition `A : Prop` and any non trivial ring `R` (i.e. where `0ᵣ ≠ 1ᵣ`) which has decidable equivalence (possibly this is equality, e.g. for `Z`), then `I := { x ∈ R | x = 0ᵣ ∨ A }` is an ideal of `R`, and if it is finitely generated (a fortiori principal) then one can prove `A ∨ ¬ A`. This observation is already made in the discussion [2].

As consequence, no non trivial ring with decidable equivalence can be Noetherian unless the law of excluded middle holds, which is by definition refuted in anti-classical settings. So neither `Z` nor `Z/nZ` (`n > 1`) can be Noetherian with that definition of Noetherian based on the existence of a finite set of generators for all ideals.

There are many possible alternate characterizations of Noetherian rings that better suit constructive or anti-classical settings,
see e.g. [2], or [4] for a more in depth analysis.

The prefered constructive formulation of the HBT is _`R[X]` is Noetherian when the ring `R` is_ or Noetherianess is preserved by the polynomial ring construction, which of course constructivelly implies the initial formulation of the HBT as `F[X₁,...,Xₙ]` is Noetherian. However, a good definition of Noetherianess will not constructivelly imply the existence of finite basis 
for any ideal (because of the argumentation above).

We use the definition proposed in [1], using `bar` inductive predicates, with a revisited terminology. Let us define L(inearly) D(ependent) for a list of values in `R` as `LD [x₁;...;xₙ]` if `xi ∈ Idl {xᵢ₊₁;...;xₙ}` for some `i`, where `Idl P` is the smallest
ideal containing a subset `P` of `R`. Notice that when `R` is a field, this amounts to saying that the list of values `[x₁;...;xₙ]` are linearly dependent.

Then _we characterize Noetherianess as `bar LD []`_, i.e. the empty list is bound to become linearly dependent after finitely many steps, however you extend it by adding elements at its head. As a consequence there cannot exist an infinite sequence of linearly independent elements. But constructivelly, this does not imply that ideals always have finite sets of generators.

## Details of the proof

- the _open induction principle_ is reinterpreted as a well-founded induction over the projection of a lexicographic product

## References

- [1]. [Gröbner Bases in Type Theory](https://link.springer.com/chapter/10.1007/3-540-48167-2_3) by _Coquand & Persson_ 1998.
- [2]. The following discussion is interesting (https://mathoverflow.net/questions/222923/alternate-proofs-of-hilberts-basis-theorem).
- [3]. [Strongly Noetherian rings and constructive ideal theory](https://doi.org/10.1016/j.jsc.2003.02.001) by _Hervé Perdry_ 2004.
- [4]. See also the [Buchberger](https://github.com/rocq-community/buchberger) repository.
